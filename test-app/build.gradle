buildscript {
  repositories {
    mavenCentral()
    // Needed for ml-gradle 6.2-SNAPSHOT
    maven {
      url = "https://bed-artifactory.bedford.progress.com:443/artifactory/ml-maven-snapshots/"
    }
  }
  dependencies {
    classpath "com.marklogic:ml-gradle:6.2-SNAPSHOT"
  }
}

plugins {
  id "net.saliman.properties" version "1.5.2"
}

apply plugin: "com.marklogic.ml-gradle"

repositories {
  mavenCentral()
}

tasks.register("fluxTwoWaySSL", Exec) {
  description = "For manual testing with the Java Client's java-unittest app server when its TwoWaySSLTest has been " +
    "paused in a debugger. You can copy the keyStore/trustStore files generated by that test to this directory and " +
    "then run this task to ensure that two-way SSL works."
  workingDir = "../flux/"
  commandLine "./bin/flux", "copy",
    "--connection-string", "rest-writer:x@localhost:8012",
    "--collections", "zipcode",
    "--keystore-path", "../mlcp-testing/keyStore.jks",
    "--keystore-password", "password",
    "--truststore-path", "../mlcp-testing/trustStore.jks",
    "--truststore-password", "password",
    "--ssl-hostname-verifier", "any",
    "--preview", "10"
}
