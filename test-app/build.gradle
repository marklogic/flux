plugins {
  id 'net.saliman.properties' version '1.5.2'
  id "com.marklogic.ml-gradle" version "6.0.1"
}

repositories {
  mavenCentral()
}

tasks.register("fluxTwoWaySSL", Exec) {
  description = "For manual testing with the Java Client's java-unittest app server when its TwoWaySSLTest has been " +
    "paused in a debugger. You can copy the keyStore/trustStore files generated by that test to this directory and " +
    "then run this task to ensure that two-way SSL works."
  workingDir = "../flux/"
  commandLine "./bin/flux", "copy",
    "--connection-string", "rest-writer:x@localhost:8012",
    "--collections", "zipcode",
    "--keystore-path", "../mlcp-testing/keyStore.jks",
    "--keystore-password", "password",
    "--truststore-path", "../mlcp-testing/trustStore.jks",
    "--truststore-password", "password",
    "--ssl-hostname-verifier", "any",
    "--preview", "10"
}
